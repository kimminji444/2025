# íŒŒì¼ëª… ì˜ˆì‹œ: app.py
# ì‚¬ìš©ë²•: í„°ë¯¸ë„ì—ì„œ `streamlit run app.py`

import streamlit as st
from difflib import get_close_matches

st.set_page_config(page_title="ì§ˆë³‘Â·ì¦ìƒ ê²€ìƒ‰ ë„ìš°ë¯¸", page_icon="ğŸ©º", layout="wide")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1) ê°„ë‹¨í•œ ë°ì´í„°ë² ì´ìŠ¤ (ì˜ˆì‹œ)
#    - ì‹¤ì œ ì„œë¹„ìŠ¤ë¼ë©´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì˜í•™ ë°ì´í„° ì†ŒìŠ¤ì™€ ì—°ë™í•˜ì„¸ìš”.
#    - ì—¬ê¸°ì„œëŠ” êµìœ¡/ë°œí‘œìš©ìœ¼ë¡œ ì•„ì£¼ ê¸°ì´ˆì ì¸ ì •ë³´ë§Œ ë‹´ì•˜ìŠµë‹ˆë‹¤.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DB = [
    {
        "name": "ê°ê¸° (ìƒê¸°ë„ ê°ì—¼)",
        "symptoms": ["ì½§ë¬¼", "ì½”ë§‰í˜", "ì¬ì±„ê¸°", "ê¸°ì¹¨", "ì¸í›„í†µ", "ë¯¸ì—´", "ëª¸ì‚´"],
        "about": "ë°”ì´ëŸ¬ìŠ¤ì— ì˜í•œ ìƒê¸°ë„ ê°ì—¼ìœ¼ë¡œ ë³´í†µ 7~10ì¼ ë‚´ í˜¸ì „ë©ë‹ˆë‹¤.",
        "care": ["ìˆ˜ë¶„ ì„­ì·¨", "íœ´ì‹", "í•´ì—´ì§„í†µì œ(í•„ìš”ì‹œ)", "ìƒë¦¬ì‹ì—¼ìˆ˜ ë¹„ê°•ì„¸ì²™"],
        "doctor_when": ["ê³ ì—´ì´ 3ì¼ ì´ìƒ ì§€ì†", "í˜¸í¡ê³¤ë€", "ì˜ì‹ì €í•˜ ë˜ëŠ” ì‹¬í•œ íƒˆìˆ˜"],
        "treat": "ëŒ€ê°œ ëŒ€ì¦ì¹˜ë£Œ(ì¦ìƒ ì™„í™”). í•­ìƒì œëŠ” ë³´í†µ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
        "tags": ["ê°ê¸°", "ì½”ê°ê¸°", "ìƒê¸°ë„ ê°ì—¼"],
    },
    {
        "name": "ë…ê° (ì¸í”Œë£¨ì—”ì)",
        "symptoms": ["ê³ ì—´", "ì˜¤í•œ", "ê·¼ìœ¡í†µ", "ë‘í†µ", "ë§ˆë¥¸ê¸°ì¹¨", "í”¼ë¡œ"],
        "about": "ì¸í”Œë£¨ì—”ì ë°”ì´ëŸ¬ìŠ¤ ê°ì—¼. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ê³ ì—´ê³¼ ì „ì‹ í†µì´ íŠ¹ì§•ì…ë‹ˆë‹¤.",
        "care": ["í•´ì—´ì§„í†µì œ", "ìˆ˜ë¶„/íœ´ì‹", "ì´ˆê¸°(48ì‹œê°„ ì´ë‚´) í•­ë°”ì´ëŸ¬ìŠ¤ì œ ê³ ë ¤"],
        "doctor_when": ["í˜¸í¡ê³¤ë€", "ì˜ì‹ì €í•˜", "ê¸°ì €ì§ˆí™˜ ì•…í™”", "ì˜ìœ ì•„Â·ê³ ë ¹Â·ì„ì‹  ì¤‘"],
        "treat": "ì¦ìƒ ì‹œì‘ 48ì‹œê°„ ì´ë‚´ í•­ë°”ì´ëŸ¬ìŠ¤ì œ íˆ¬ì—¬ë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "tags": ["ë…ê°", "ì¸í”Œë£¨ì—”ì"],
    },
    {
        "name": "í¸ë„ì—¼",
        "symptoms": ["ì¸í›„í†µ", "ì‚¼í‚´í†µ", "ê³ ì—´", "í¸ë„ ë¹„ëŒ€", "ëª© ì‰¼"],
        "about": "ë°”ì´ëŸ¬ìŠ¤ ë˜ëŠ” ì„¸ê· ì— ì˜í•´ í¸ë„ê°€ ì—¼ì¦ì„ ì¼ìœ¼í‚¨ ìƒíƒœì…ë‹ˆë‹¤.",
        "care": ["ìˆ˜ë¶„/íœ´ì‹", "ì§„í†µí•´ì—´ì œ", "ê¿€ë¬¼Â·ë”°ëœ»í•œ ìŒë£Œ"],
        "doctor_when": ["í˜¸í¡ê³¤ë€", "3ì¼ ì´ìƒ ê³ ì—´", "ì—°í•˜ê³¤ë€ìœ¼ë¡œ íƒˆìˆ˜ ì˜ì‹¬"],
        "treat": "ì„¸ê· ì„± ì˜ì‹¬ ì‹œ í•­ìƒì œ. ì¬ë°œ ì¦ê³  ì¤‘ì¦ì´ë©´ ìˆ˜ìˆ  ê³ ë ¤.",
        "tags": ["í¸ë„ì„ ì—¼", "ëª©ê°ê¸°"],
    },
    {
        "name": "ìœ„ì¥ê´€ì—¼ (ì¥ì—¼)",
        "symptoms": ["ë³µí†µ", "ì„¤ì‚¬", "êµ¬í† ", "ë©”ìŠ¤êº¼ì›€", "ë°œì—´"],
        "about": "ë°”ì´ëŸ¬ìŠ¤/ì„¸ê· /ê¸°ìƒì¶© ë“±ìœ¼ë¡œ ìœ„ì¥ê´€ì— ì—¼ì¦ì´ ìƒê¸´ ìƒíƒœ.",
        "care": ["ìˆ˜ë¶„Â·ì „í•´ì§ˆ ë³´ì¶©", "ê¸°ë¦„ì§„ ìŒì‹ í”¼í•˜ê¸°", "íœ´ì‹"],
        "doctor_when": ["í˜ˆë³€", "ì‹¬í•œ íƒˆìˆ˜(ì–´ì§€ëŸ¼, ì†Œë³€ ê°ì†Œ)", "ê³ ì—´ ì§€ì†", "ì˜ìœ ì•„Â·ë…¸ì•½ì"],
        "treat": "ì›ì¸ì— ë”°ë¼ ëŒ€ì¦ìš”ë²•, í•„ìš” ì‹œ ì§€ì‚¬ì œ/í•­ìƒì œ/í•­êµ¬í† ì œ.",
        "tags": ["ì¥ì—¼", "ì‹ì¤‘ë…"],
    },
    {
        "name": "í¸ë‘í†µ",
        "symptoms": ["ë°•ë™ì„± ë‘í†µ", "ì˜¤ì‹¬", "êµ¬í† ", "ê´‘ê³¼ë¯¼", "ì†Œë¦¬ ê³¼ë¯¼", "ì „ì¡°(ì˜¤ë¼)"],
        "about": "ë°˜ë³µë˜ëŠ” ì¤‘ë“±ë„~ì¤‘ì¦ì˜ ë°•ë™ì„± ë‘í†µ. ë¹›/ì†Œë¦¬ì— ë¯¼ê°í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "care": ["ì¡°ìš©í•˜ê³  ì–´ë‘ìš´ ê³³ì—ì„œ íœ´ì‹", "ìˆ˜ë¶„ ì„­ì·¨", "ì¹´í˜ì¸ ì†ŒëŸ‰(ì¼ë¶€ ë„ì›€)"],
        "doctor_when": ["ê°‘ìê¸° ë²ˆê°œì²˜ëŸ¼ ì‹¬í•œ ë‘í†µ", "ì‹ ê²½í•™ì  ì¦ìƒ ë™ë°˜", "ë°œì—´Â·ëª©ê²½ì§ ë™ë°˜"],
        "treat": "ì§„í†µì œ, íŠ¸ë¦½íƒ„ê³„ ì•½ë¬¼ ë“±. ì˜ˆë°©ì•½ë¬¼ì€ ë¹ˆë„Â·ì¤‘ì¦ë„ì— ë”°ë¼ ê³ ë ¤.",
        "tags": ["í¸ë‘í†µ", "í¸ë‘í†µ ì „ì¡°"],
    },
    {
        "name": "ì²œì‹",
        "symptoms": ["ìŒ•ìŒ•ê±°ë¦¼", "ê¸°ì¹¨", "ìˆ¨ì°¸", "í‰ë¶€ ì••ë°•ê°", "ì•¼ê°„/ìƒˆë²½ ì•…í™”"],
        "about": "ê¸°ë„ì˜ ë§Œì„± ì—¼ì¦ìœ¼ë¡œ ê°€ì—­ì  ê¸°ë„íì‡„ê°€ ë°˜ë³µë˜ëŠ” ì§ˆí™˜ì…ë‹ˆë‹¤.",
        "care": ["ìœ ë°œìš”ì¸ íšŒí”¼", "í¡ì…ì œ ì •ê¸° ì‚¬ìš©(ì˜ì‚¬ ì²˜ë°©)", "ì¦ìƒì¼ì§€ ê¸°ë¡"],
        "doctor_when": ["ë§ì´ ëŠê¸°ëŠ” ì‹¬í•œ ìˆ¨ì°¸", "ì²­ìƒ‰ì¦", "êµ¬ì¡° í˜¸í¡ í•„ìš”"],
        "treat": "í¡ì…í˜• ìŠ¤í…Œë¡œì´ë“œ, ê¸°ê´€ì§€í™•ì¥ì œ ë“± ê°œì¸ ë§ì¶¤ ì¹˜ë£Œê°€ í•„ìš”.",
        "tags": ["ê¸°ê´€ì§€ ì²œì‹", "ì•Œë ˆë¥´ê¸°ì„± ì²œì‹"],
    },
    {
        "name": "ì•Œë ˆë¥´ê¸° ë¹„ì—¼",
        "symptoms": ["ì¬ì±„ê¸°", "ê°€ë ¤ìš´ ì½§ì†", "ë§‘ì€ ì½§ë¬¼", "ì½”ë§‰í˜", "ëˆˆ ê°€ë ¤ì›€/ëˆˆë¬¼"],
        "about": "íŠ¹ì • ì•Œë ˆë¥´ê²ì— ëŒ€í•œ ê³¼ë¯¼ë°˜ì‘ìœ¼ë¡œ ì½” ì ë§‰ì— ì—¼ì¦ì´ ìƒê¹ë‹ˆë‹¤.",
        "care": ["ì•Œë ˆë¥´ê² íšŒí”¼", "ìƒë¦¬ì‹ì—¼ìˆ˜ ì„¸ì²™", "ì‹¤ë‚´ ê³µê¸° ê´€ë¦¬"],
        "doctor_when": ["ì²œì‹ ì¦ìƒ ë™ë°˜", "ë§Œì„± ë¶€ë¹„ë™ì—¼ ì˜ì‹¬", "ì¼ìƒìƒí™œ ì§€ì¥"],
        "treat": "í•­íˆìŠ¤íƒ€ë¯¼ì œ, ë¹„ê°• ìŠ¤í…Œë¡œì´ë“œ ìŠ¤í”„ë ˆì´, ë©´ì—­ì¹˜ë£Œ(ì„ ë³„ì ).",
        "tags": ["ë¹„ì—¼", "ê½ƒê°€ë£¨ ì•Œë ˆë¥´ê¸°"],
    },
    {
        "name": "ë‹¹ë‡¨ë³‘ (ì œ2í˜•)",
        "symptoms": ["ë‹¤ë‡¨", "ë‹¤ê°ˆ", "ë‹¤ì‹", "í”¼ë¡œ", "ì²´ì¤‘ë³€í™”", "ìƒì²˜ íšŒë³µ ì§€ì—°"],
        "about": "ì¸ìŠë¦° ì €í•­ì„±/ë¶„ë¹„ì €í•˜ë¡œ í˜ˆë‹¹ì´ ë§Œì„±ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ëŒ€ì‚¬ì§ˆí™˜.",
        "care": ["ì‹ì´Â·ìš´ë™ìš”ë²•", "ì²´ì¤‘ ê´€ë¦¬", "í˜ˆë‹¹ ìê°€ì¸¡ì •"],
        "doctor_when": ["ì €í˜ˆë‹¹ ì¦ìƒ", "í˜ˆë‹¹ ì¡°ì ˆ ë¶ˆê°€", "ì‹œë ¥ ì €í•˜Â·í”¼ë¶€ê°ì—¼"],
        "treat": "ê²½êµ¬í˜ˆë‹¹ê°•í•˜ì œ/ì¸ìŠë¦° ë“±. ì •ê¸°ì  ì˜ë£Œì§„ ìƒë‹´ í•„ìˆ˜.",
        "tags": ["ë‹¹ë‡¨", "ì œ2í˜• ë‹¹ë‡¨"],
    },
    {
        "name": "ê³ í˜ˆì••",
        "symptoms": ["ë¬´ì¦ìƒ", "ë‘í†µ", "ì–´ì§€ëŸ¼", "í‰í†µ", "í˜¸í¡ê³¤ë€"],
        "about": "ì§€ì†ì ìœ¼ë¡œ ë†’ì€ í˜ˆì•• ìƒíƒœ. í•©ë³‘ì¦ ì˜ˆë°©ì„ ìœ„í•œ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
        "care": ["ì—¼ë¶„ ì œí•œ", "ìš´ë™", "ì²´ì¤‘Â·ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬", "ê¸ˆì—°"],
        "doctor_when": ["ìˆ˜ì¶•ê¸° â‰¥180 ë˜ëŠ” ì´ì™„ê¸° â‰¥120mmHg", "ì‹ ê²½í•™ì  ì¦ìƒ ë™ë°˜"],
        "treat": "ìƒí™œìŠµê´€ êµì • + í•­ê³ í˜ˆì••ì œ(ì˜ì‚¬ ì²˜ë°©).",
        "tags": ["í˜ˆì••", "ê³ í˜ˆì••ì¦"],
    },
    {
        "name": "ì‹¬ê·¼ê²½ìƒ‰",
        "symptoms": ["ê°€ìŠ´ í†µì¦(ì••ë°•ê°)", "ì¢Œì¸¡ íŒ”Â·í„± ë°©ì‚¬í†µ", "ì‹ì€ë•€", "í˜¸í¡ê³¤ë€", "êµ¬ì—­"],
        "about": "ì‹¬ì¥í˜ˆê´€ì´ ë§‰í˜€ ì‹¬ê·¼ì´ ê´´ì‚¬í•˜ëŠ” ì‘ê¸‰ì§ˆí™˜ì…ë‹ˆë‹¤.",
        "care": ["ì¦‰ì‹œ 119/ì‘ê¸‰ì‹¤", "ì›€ì§ì„ ìµœì†Œí™”"],
        "doctor_when": ["ì˜ì‹¬ë˜ë©´ ì§€ì²´ ì—†ì´ ì‘ê¸‰ì‹¤"],
        "treat": "ì‘ê¸‰ ì¬ê´€ë¥˜ ì¹˜ë£Œ(ìŠ¤í…íŠ¸/ìš©í•´ì œ) ë“± ë³‘ì› ì¹˜ë£Œê°€ í•„ìš”.",
        "tags": ["ì‹¬ì¥ë§ˆë¹„", "ì‹¬ê·¼ê²½ìƒ‰ì¦"],
    },
]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 2) ë¬¸ìì—´ ì „ì²˜ë¦¬ & ê°„ë‹¨ ë§¤ì¹­ í•¨ìˆ˜
#    - ë³‘ëª… ê²€ìƒ‰: ì² ì ìœ ì‚¬ë„(ê°€ê¹Œìš´ ì² ì) + íƒœê·¸ í¬í•¨
#    - ì¦ìƒ ê²€ìƒ‰: ì…ë ¥ ë¬¸ì¥ì— í¬í•¨ëœ ì¦ìƒ í‚¤ì›Œë“œê°€ ëª‡ ê°œ ì¼ì¹˜í•˜ëŠ”ì§€ ì ìˆ˜í™”
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def normalize(text: str) -> str:
    return text.strip().lower()

# ì¦ìƒ í‚¤ì›Œë“œ ì‚¬ì „(ê°„ë‹¨)
ALL_SYMPTOMS = sorted({s for item in DB for s in item["symptoms"]})

# ë³‘ëª…/íƒœê·¸ ì¸ë±ìŠ¤
NAME_INDEX = {normalize(tag): i for i, item in enumerate(DB) for tag in [item["name"], *item["tags"]]}


def search_by_disease_name(query: str, topk: int = 5):
    if not query:
        return []
    q = normalize(query)
    # 1) ì •í™•/ë¶€ë¶„ ì¼ì¹˜ ìš°ì„ 
    direct_hits = [idx for key, idx in NAME_INDEX.items() if q in key]
    # 2) ì² ì ìœ ì‚¬ë„(ê°€ê¹Œìš´ ì² ì)
    close = get_close_matches(q, list(NAME_INDEX.keys()), n=topk, cutoff=0.6)
    close_hits = [NAME_INDEX[c] for c in close]
    hits = list(dict.fromkeys([*direct_hits, *close_hits]))  # ì¤‘ë³µ ì œê±°/ìˆœì„œ ìœ ì§€
    return [DB[i] for i in hits][:topk]


def search_by_symptoms(text: str, topk: int = 5):
    if not text:
        return []
    q_tokens = [normalize(t) for t in text.replace(",", " ").split()]
    # ì…ë ¥ ë¬¸ì¥ì—ì„œ DB ì¦ìƒ í‚¤ì›Œë“œê°€ ëª‡ ê°œ í¬í•¨ë˜ëŠ”ì§€ ìŠ¤ì½”ì–´ë§
    scores = []
    for item in DB:
        match_cnt = 0
        for s in item["symptoms"]:
            if normalize(s) in q_tokens or any(normalize(s) in tok for tok in q_tokens):
                match_cnt += 1
        scores.append((match_cnt, item))
    scores.sort(key=lambda x: (-x[0], x[1]["name"]))
    # ë§¤ì¹­ì´ 0ê°œì¸ í•­ëª©ì€ ì œì™¸
    return [it for cnt, it in scores if cnt > 0][:topk]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 3) UI êµ¬ì„±
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

st.title("ğŸ©º ì§ˆë³‘Â·ì¦ìƒ ê²€ìƒ‰ ë„ìš°ë¯¸")

with st.expander("ì¤‘ìš” ì•ˆë‚´ (ì˜í•™ì  ì¡°ì–¸ ì•„ë‹˜)", expanded=True):
    st.warning(
        """
        â€¢ ì´ ì•±ì€ **êµìœ¡ ë° ì •ë³´ ì œê³µ ëª©ì **ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ì§„ë‹¨/ì¹˜ë£ŒëŠ” ì˜ë£Œ ì „ë¬¸ê°€ì˜ ì§„ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤.\n
        â€¢ **ê°€ìŠ´ í†µì¦, í˜¸í¡ê³¤ë€, ì˜ì‹ì €í•˜, ì²­ìƒ‰ì¦, ì‹ ê²½í•™ì  ì¦ìƒ** ë“± ì‘ê¸‰ ì¦ìƒì´ ìˆìœ¼ë©´ ì¦‰ì‹œ 119 ë˜ëŠ” ê°€ê¹Œìš´ ì‘ê¸‰ì‹¤ë¡œ ê°€ì„¸ìš”.
        """
    )

left, right = st.columns([2, 1])
with left:
    st.subheader("ê²€ìƒ‰ ì…ë ¥")
    mode = st.radio("ê²€ìƒ‰ ë°©ë²•", ["ì¦ìƒìœ¼ë¡œ ê²€ìƒ‰", "ì§ˆë³‘ëª…ìœ¼ë¡œ ê²€ìƒ‰"], horizontal=True)

    if mode == "ì¦ìƒìœ¼ë¡œ ê²€ìƒ‰":
        text = st.text_area("ì¦ìƒ(ë˜ëŠ” í‚¤ì›Œë“œ)ì„ ì…ë ¥í•˜ì„¸ìš”", placeholder="ì˜ˆ: ê³ ì—´ ì˜¤í•œ ê·¼ìœ¡í†µ ë§ˆë¥¸ê¸°ì¹¨")
        if st.button("ê²€ìƒ‰", use_container_width=True):
            results = search_by_symptoms(text)
            if not results:
                st.info("ê´€ë ¨ ê²°ê³¼ê°€ ì—†ì–´ìš”. ì¦ìƒì„ 2~3ê°œ ì´ìƒ ì…ë ¥í•´ ë³´ì„¸ìš”.")
            for item in results:
                with st.container(border=True):
                    st.markdown(f"### {item['name']}")
                    st.caption("ê°€ëŠ¥ì„± ìˆëŠ” ê´€ë ¨ í•­ëª©")
                    st.markdown(f"**ì£¼ìš” ì¦ìƒ:** {', '.join(item['symptoms'])}")
                    st.markdown(f"**ì„¤ëª…:** {item['about']}")
                    st.markdown(f"**ìê°€ê´€ë¦¬:** {', '.join(item['care'])}")
                    st.markdown(f"**ì¹˜ë£Œ(ì˜ë£Œì§„):** {item['treat']}")
                    st.markdown(f"**ë‹¤ìŒê³¼ ê°™ìœ¼ë©´ ì§„ë£Œ í•„ìš”:** {', '.join(item['doctor_when'])}")
    else:
        query = st.text_input("ì§ˆë³‘ëª…(ë˜ëŠ” ë³„ì¹­/íƒœê·¸)", placeholder="ì˜ˆ: ë…ê°, ì¥ì—¼, ì²œì‹â€¦")
        if st.button("ê²€ìƒ‰", use_container_width=True):
            results = search_by_disease_name(query)
            if not results:
                st.info("ê´€ë ¨ ê²°ê³¼ê°€ ì—†ì–´ìš”. ë‹¤ë¥¸ ì´ë¦„(ë³„ì¹­)ìœ¼ë¡œë„ ì‹œë„í•´ ë³´ì„¸ìš”.")
            for item in results:
                with st.container(border=True):
                    st.markdown(f"### {item['name']}")
                    st.caption("ì—°ê´€ í•­ëª©")
                    st.markdown(f"**ì£¼ìš” ì¦ìƒ:** {', '.join(item['symptoms'])}")
                    st.markdown(f"**ì„¤ëª…:** {item['about']}")
                    st.markdown(f"**ìê°€ê´€ë¦¬:** {', '.join(item['care'])}")
                    st.markdown(f"**ì¹˜ë£Œ(ì˜ë£Œì§„):** {item['treat']}")
                    st.markdown(f"**ë‹¤ìŒê³¼ ê°™ìœ¼ë©´ ì§„ë£Œ í•„ìš”:** {', '.join(item['doctor_when'])}")

with right:
    st.subheader("ë„ì›€ë§")
    st.markdown(
        """
        - **ì¦ìƒìœ¼ë¡œ ê²€ìƒ‰**: ê³ ì—´, ê¸°ì¹¨, ë³µí†µ ê°™ì€ ë‹¨ì–´ë¥¼ **ê³µë°±ìœ¼ë¡œ êµ¬ë¶„**í•´ ì ì–´ë³´ì„¸ìš”.\n
        - **ì§ˆë³‘ëª…ìœ¼ë¡œ ê²€ìƒ‰**: 'ì¥ì—¼', 'í¸ë„ì—¼', 'ë…ê°' ê°™ì€ **ì¼ë°˜ëª…/ë³„ì¹­**ë„ ë©ë‹ˆë‹¤.\n
        - ê²°ê³¼ëŠ” **ìœ ì‚¬ ì¦ìƒ ìˆ˜**ë‚˜ **ì² ì ìœ ì‚¬ë„**ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì •ë ¬ë©ë‹ˆë‹¤.\n
        - ë°œí‘œ íŒ: ë°ì´í„°ëŠ” íŒŒì´ì¬ ë¦¬ìŠ¤íŠ¸(DB)ë¡œ ê´€ë¦¬ â†’ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” **ê³µì‹ ì˜í•™ ë°ì´í„°**ì™€ ì—°ë™í•˜ë©´ í™•ì¥ ê°€ëŠ¥í•˜ë‹¤ê³  ì„¤ëª…í•˜ì„¸ìš”.
        """
    )

st.divider()

st.caption("Â© êµìœ¡Â·ë°œí‘œìš© ìƒ˜í”Œ. ì˜í•™ì  íŒë‹¨ì€ ë°˜ë“œì‹œ ì˜ë£Œ ì „ë¬¸ê°€ì™€ ìƒì˜í•˜ì„¸ìš”.")

